{% extends '@admin/default_frame.twig' %}

{% set menus = ['setting', 'shop', 'tbs_mail_template'] %}
{% block title %}{{ 'tbs_mail_template.admin.mail_template.title'|trans }}{% endblock %}
{% block sub_title %}{{ 'tbs_mail_template.admin.mail_template.sub_title'|trans }}{% endblock %}

{% block stylesheet %}
    <link rel="stylesheet" href="{{ asset('assets/css/tempusdominus-bootstrap-4.min.css', 'admin') }}">
{% endblock stylesheet %}

{% block main %}
<div class="c-contentsArea__cols">
    <div class="c-contentsArea__primaryCol">
        <div class="c-primaryCol">
            <div class="d-block mb-3">
                <a id="addNew" class="btn btn-ec-regular"
                   href="{{ url('tbs_mail_template_admin_config_mail_template_new') }}">{{ 'admin.common.create__new'|trans }}</a>
            </div>
            <div class="card rounded border-0 mb-4">
                <div class="card-body p-0">
                    <table class="table table-sm">
                        <thead>
                            <tr>
                                <th class="col-auto">{{ 'tbs_mail_template.admin.mail_template.th_id'|trans }}</th>
                                <th class="col-auto">{{ 'tbs_mail_template.admin.mail_template.th_name'|trans }}</th>
                                <th class="col-auto">{{ 'tbs_mail_template.admin.mail_template.th_mail_subject'|trans }}</th>
                                <th class="col-auto">&nbsp;</th>
                            </tr>
                        </thead>
                        <tbody class="sortable-item">
                        {% for MailTemplate in MailTemplates %}
                            <tr>
                                <td class="col-auto">{{ MailTemplate.id }}</td>
                                <td class="col-auto">{{ MailTemplate.name }}</td>
                                <td class="col-auto">{{ MailTemplate.mail_subject }}</td>
                                <td class="col-auto icon_edit text-right">
                                    <a href="{{ url('tbs_mail_template_admin_config_mail_template_edit', { id : MailTemplate.id }) }}"
                                       class="btn btn-ec-actionIcon mr-3 action-edit"
                                       data-toggle="tooltip"
                                       data-placement="top" title=""
                                       data-original-title=""><i class="fa fa-pencil fa-lg text-secondary"></i></a>

                                {% if MailTemplate.id > eccube_config.eccube_shipping_notify_mail_template_id %}
                                    <a
                                        class="btn btn-ec-actionIcon mr-3"
                                        data-toggle="modal"
                                        data-target="#confirmModal-{{ MailTemplate.id }}"
                                        data-toggle="tooltip"
                                        data-placement="top"><i class="fa fa-close fa-lg text-secondary"></i></a>
                                    <div class="modal fade" id="confirmModal-{{ MailTemplate.id }}" tabindex="-1"
                                         role="dialog"
                                         aria-labelledby="confirmModal-{{ MailTemplate.id }}" aria-hidden="true">
                                        <div class="modal-dialog" role="document">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h5 class="modal-title font-weight-bold">
                                                        {{ 'tbs_mail_template.admin.mail_template.delete_confirm_title'|trans }}</h5>
                                                    <button class="close" type="button"
                                                            data-dismiss="modal"
                                                            aria-label="Close"><span
                                                                aria-hidden="true">Ã—</span>
                                                    </button>
                                                </div>
                                                <div class="modal-body text-left">
                                                    <p class="text-left">
                                                        {{ 'tbs_mail_template.admin.mail_template.delete_confirm_message'|trans }}</p>
                                                </div>
                                                <div class="modal-footer">
                                                    <button class="btn btn-ec-sub" type="button"
                                                            data-dismiss="modal">{{ 'tbs_mail_template.admin.mail_template.delete_cancel'|trans }}
                                                    </button>
                                                    <a
                                                            href="{{ url('tbs_mail_template_admin_config_mail_template_delete', { id : MailTemplate.id }) }}"
                                                            class="btn btn-ec-delete"
                                                            data-confirm="false"
                                                            {{ csrf_token_for_anchor() }}
                                                            data-method="delete">
                                                        {{ 'tbs_mail_template.admin.mail_template.delete'|trans }}
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                {% endif %}
                                </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
